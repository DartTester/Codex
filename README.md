# Codex
Во-первых, следует упомянуть о том, что если в данном API требуется авторизация, то первым делом я начну с проверок безопасности и проверю поочередно все методы, что они возвращают ожидаемый ответ.

## Проверка безопасности
В проверках использую существующий customer_id
          

Проверка        | Результат
----------------|----------------------
Выполнить POST /api/customer/ 44ca222b-a948-4c23-8f3b-c412515b47b6/purchase       | 401 Error: Unauthorized   
Выполнить GET /api/customer/44ca222b-a948-4c23-8f3b-c412515b47b6/points      | 401 Error: Unauthorized   
Выполнить POST /api/discount/calculate   | 401 Error: Unauthorized   

Во-вторых, при наличии разграничений доступов по определенным ролям в системе, я авторизуюсь в API и проверю, что при отсутствии нужных ролей получу ожидаемый результат.
## Проверка разграничения прав доступа
В проверках использую существующий customer_id

Проверка        | Результат
----------------|----------------------
Выполнить POST /api/customer/ 44ca222b-a948-4c23-8f3b-c412515b47b6/purchase      | 403 Forbidden 
Выполнить GET /api/customer/44ca222b-a948-4c23-8f3b-c412515b47b6/points      | 403 Forbidden   
Выполнить POST /api/discount/calculate   | 403 Forbidden  


## Начисление баллов за покупки POST /api/customer/{customer_id}/purchase
Предполагаю, что в данном методе в запросе также у нас есть полезная нагрузка, в которой передаются на вход некоторые данные по конкретной покупке для рассчета бонусов. На бэке происходит рассчет положенных бонусов и в ответе возвращается нам обновленное количество бонусных баллов клиента (общий баланс).

Допустим, тело выглядит так:{
"paymentId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
"purchaseSum": 0,
"date": "2024-03-30T08:14:56.929Z"
}

В контексте задания тестирую "purchaseSum" в теле и {customer_id} в заголовке
Проверю все коды ответов, прописанные в ТА:

Проверка        | Результат
----------------|----------------------
Указать существующий customer_id и "purchaseSum": 1500 | 200 ОК, в ответе баланс +1 бонус, в бд данные записались
Указать НЕсуществующий customer_id, но в валидном формате (guid) и "purchaseSum": 1500 | 404 Forbidden, в бд данные не записаны     
Указать существующий customer_id и "purchaseSum": “тест” (невалидное значение)| 400 Bad Request, в бд данные не записаны

Далее проверки “customer_id”:
Проверка        | Результат
----------------|----------------------
Позитивная проверка была в шаге выше | 200 ОК
Указать customer_id покупателя, который был удален ранее (isclosed=true) | 404 Forbidden     
Указать НЕсуществующий customer_id, в НЕвалидном формате ”12345” и "purchaseSum": 1500 | запрос не отправлен
Указать пустой customer_id и "purchaseSum": 1500| запрос не отправлен
Указать в customer_id текстовое значение, символьное, пробелы и "purchaseSum": 1500| запрос не отправлен

Далее проверки “purchaseSum” (допустим, что "purchaseSum" у нас всегда целое число)
Проверка        | Результат
----------------|----------------------
Указать существующий customer_id и указать поочередно "purchaseSum": 1 000 000 (100 000 и 10 000)| 200 ОК, в ответе баланс +1000 бонусов (+100 и +10)
Указать существующий customer_id и "purchaseSum": 1000 (граничное)| 200 ОК, в ответе баланс +1 бонус 
Указать существующий customer_id и "purchaseSum": 1001 (граничное)| 200 ОК, в ответе баланс +1 бонус  
Указать существующий customer_id и "purchaseSum": 999 (граничное)| 200 ОК, в ответе баланс +0 бонус    
Указать существующий customer_id и "purchaseSum": 500 | 200 ОК, в ответе баланс +0 бонус    
Указать существующий customer_id и "purchaseSum": 1 | 200 ОК, в ответе баланс +0 бонус    
Указать существующий customer_id и "purchaseSum": 0 | 400 Bad Request    
Указать существующий customer_id и "purchaseSum": -1 | 400 Bad Request    
Указать существующий customer_id и "purchaseSum": 0.1 | 400 Bad Request    
Указать существующий customer_id и "purchaseSum": пустое, пробелы, текст, символы, дату, длинное значение, скрипт| 400 Bad Request  

## Запрашиваем бонусный баланс клиента GET /api/customer/{customer_id}/points:
Проверка        | Результат
----------------|----------------------
Указать существующий customer_id | 200 ОК, баланс в теле ответа
Указать customer_id покупателя, который был удален ранее (isclosed=true)| 404 Forbidden 
Указать НЕсуществующий customer_id, в валидном формате (guid) | 404 Forbidden 
Указать НЕсуществующий customer_id, в НЕвалидном формате ”12345”| Запрос не отправлен 
Указать Указать пустой customer_id | Запрос не отправлен
Указать в customer_id текстовое значение, символьное, пробелы| Запрос не отправлен

## Получаем % скидки POST /api/discount/calculate:
Этот метод принимает количество баллов в качестве параметра и возвращает процент скидки в соответствии с условиями начисления.
Правила расчета скидки: 
* От 0 до 150 баллов - скидка 1%
* От 150 до 200 баллов - скидка 5%
* От 200 до 400 баллов - скидка 7%
* От 400 баллов - скидка 10%

Проверка        | Результат
----------------|----------------------
Указать 500 |	200 ОК В ответе 10
Указать 401 (граничное)|	200 ОК В ответе 10
Указать 400 (граничное)|	200 ОК В ответе 10
Указать 399 (граничное)|	200 ОК В ответе 7
Указать 250 (середина диапазона)|	200 ОК В ответе 7
Указать 201 (граничное)|	200 ОК В ответе 7
Указать 200 (граничное)|	200 ОК В ответе 7
Указать 199 (граничное)|	200 ОК В ответе 5
Указать 175 (середина диапазона)|	200 ОК В ответе 5
Указать 151 (граничное)|	200 ОК В ответе 5
Указать 150 (граничное)|	200 ОК В ответе 5
Указать 149 (граничное)|	200 ОК В ответе 1
Указать 75 (середина диапазона)|	200 ОК В ответе 1
Указать 1 (граничное)|	200 ОК В ответе 1
Указать 0 (граничное)|	200 ОК В ответе 1
Указать -1	|Запрос не отправлен
Указать 0.123	|Запрос не отправлен
Указать пустое поле, пробелы, текст, символы, дату, длинное значение|	Запрос не отправлен







